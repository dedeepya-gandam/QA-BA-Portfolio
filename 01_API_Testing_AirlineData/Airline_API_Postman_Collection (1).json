{
  "info": {
    "name": "Airline Flight Data API \u2013 QA Portfolio",
    "_postman_id": "dedeepya-airline-api-portfolio",
    "description": "Postman collection for testing public airline data APIs using a placeholder API key.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth Check \u2013 Invalid Key",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://api.aviationstack.com/v1/flights?access_key=INVALID_KEY",
          "protocol": "http",
          "host": [
            "api",
            "aviationstack",
            "com"
          ],
          "path": [
            "v1",
            "flights"
          ],
          "query": [
            {
              "key": "access_key",
              "value": "INVALID_KEY"
            }
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 401 or 403 for invalid key', function () {",
              "    pm.expect(pm.response.code).to.be.oneOf([401, 403, 200]);",
              "});",
              "pm.test('Error message contains key information', function () {",
              "    pm.expect(pm.response.text()).to.include('access_key');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Get Flights \u2013 Basic Search",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://api.aviationstack.com/v1/flights?access_key=API_KEY_HERE&limit=10",
          "protocol": "http",
          "host": [
            "api",
            "aviationstack",
            "com"
          ],
          "path": [
            "v1",
            "flights"
          ],
          "query": [
            {
              "key": "access_key",
              "value": "API_KEY_HERE"
            },
            {
              "key": "limit",
              "value": "10"
            }
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response time is under 1200 ms', function () {",
              "    pm.expect(pm.response.responseTime).to.be.below(1200);",
              "});",
              "",
              "pm.test('Response has data array', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('data');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Get Airlines \u2013 Filter by Country",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://api.aviationstack.com/v1/airlines?access_key=API_KEY_HERE&country_name=United%20States",
          "protocol": "http",
          "host": [
            "api",
            "aviationstack",
            "com"
          ],
          "path": [
            "v1",
            "airlines"
          ],
          "query": [
            {
              "key": "access_key",
              "value": "API_KEY_HERE"
            },
            {
              "key": "country_name",
              "value": "United States"
            }
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('All returned records belong to United States (where present)', function () {",
              "    var jsonData = pm.response.json();",
              "    if (Array.isArray(jsonData.data)) {",
              "        jsonData.data.forEach(function(item){",
              "            if (item.country_name) {",
              "                pm.expect(item.country_name).to.eql('United States');",
              "            }",
              "        });",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Get Airports \u2013 Negative Test (Missing Key)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://api.aviationstack.com/v1/airports",
          "protocol": "http",
          "host": [
            "api",
            "aviationstack",
            "com"
          ],
          "path": [
            "v1",
            "airports"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Error is returned when access_key is missing', function () {",
              "    pm.expect(pm.response.text()).to.include('access_key');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    }
  ]
}